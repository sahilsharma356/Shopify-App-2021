(this.webpackJsonpimagerepo=this.webpackJsonpimagerepo||[]).push([[0],{240:function(e,t,n){},431:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(1),r=n(104),s=n.n(r),c=(n(240),n(15)),l=n(8),o=n(17),u=n(229),h=n.n(u),d=Object(o.b)(null,(function(e){return{signOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){return Object(a.jsxs)("ul",{className:"right",children:[Object(a.jsx)("li",{children:Object(a.jsx)(c.c,{to:"/create",children:Object(a.jsxs)("div",{children:[Object(a.jsx)(h.a,{fontSize:"small"})," Add New Image"]})})}),Object(a.jsxs)("li",{children:[" ",Object(a.jsx)("a",{onClick:e.signOut,children:Object(a.jsx)(c.c,{to:"/",children:"Logout"})})]}),Object(a.jsx)("li",{children:Object(a.jsx)(c.c,{to:"/",className:"btn btn-floating orange lighten-1",children:e.profile.initials})})]})})),j=function(){return Object(a.jsxs)("ul",{className:"right",children:[Object(a.jsx)("li",{children:Object(a.jsx)(c.c,{to:"/signup",children:"Sign Up"})}),Object(a.jsx)("li",{children:Object(a.jsx)(c.c,{to:"/signin",children:"Log In"})})]})},b=Object(o.b)((function(e){return console.log(e),{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,n=e.profile,i=t.uid?Object(a.jsx)(d,{profile:n}):Object(a.jsx)(j,{});return Object(a.jsx)("nav",{className:"nav-wrapper grey darken-3",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(c.b,{to:"/",className:"brand-logo",children:"Image Repository"}),i]})})})),g=n(37),p=n(38),m=n(41),O=n(39),f=n(452),x=n(453),N=n(454),v=n(455),S=n(230),y=n.n(S),C=Object(f.a)((function(e){return{grid:{width:"100%",margin:"0px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},media:{maxWidth:"100%",maxHeight:"100%"},root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",marginTop:"5%"},gridList:{maxHeight:"100%",maxWidth:"100%"},gridListTile:{marginTop:"10%"},footer:{maxHeight:"100%",maxWidth:"100%"},icon:{color:"rgba(255, 255, 255, 0.54)"}}})),w=function(e){var t=e.images,n=C();return Object(a.jsx)("div",{className:n.root,children:Object(a.jsx)(x.a,{cellHeight:375,spacing:15,className:n.gridList,cols:3,children:t&&t.map((function(e){return Object(a.jsxs)(N.a,{className:n.gridList,children:[Object(a.jsx)("img",{src:e.source}),Object(a.jsx)(v.a,{className:n.gridListTile,title:e.title,subtitle:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:e.authorFirstName+" "+e.authorLastName+",  "}),Object(a.jsx)("span",{children:y()(e.createdAt.toDate()).calendar()})]})})]},e.id)}))})})},I=n(49),E=n(30),F=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.images;return e.auth.uid?Object(a.jsx)("div",{className:"dashboard container",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col s12 m12",children:Object(a.jsx)(w,{images:t})})})}):Object(a.jsx)(l.a,{to:"/signin"})}}]),n}(i.Component),A=Object(E.d)(Object(o.b)((function(e){return console.log(e),{images:e.firestore.ordered.images,auth:e.firebase.auth}})),Object(I.firestoreConnect)([{collection:"images"}]))(F),R=n(59),D=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(R.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?Object(a.jsx)(l.a,{to:"/"}):Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(a.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign In"}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("button",{className:"btn orange lighten-1 z-depth-0",children:"Login"})}),Object(a.jsx)("div",{className:"red-text center",children:t?Object(a.jsx)("p",{children:t}):null})]})})})}}]),n}(i.Component),U=Object(o.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((n=t,function(e,t,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(n.email,n.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var n}}}))(D),_=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={email:"",password:"",firstName:"",lastName:""},e.handleChange=function(t){e.setState(Object(R.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.authError;return t.uid?Object(a.jsx)(l.a,{to:"/"}):Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(a.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign Up"}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(a.jsx)("input",{type:"text",id:"firstName",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(a.jsx)("input",{type:"text",id:"lastName",onChange:this.handleChange})]}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("button",{className:"btn orange lighten-1 z-depth-0",children:"Sign Up"})}),Object(a.jsx)("div",{className:"red-text center",children:n?Object(a.jsx)("p",{children:n}):null})]})})})}}]),n}(i.Component),L=Object(o.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,n,a){var i=a.getFirebase,r=a.getFirestore,s=i(),c=r();s.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return c.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))(_),G=n(155),k=n.n(G),P=n(231),T=n(74);n(433),n(434),n(403);T.a.initializeApp({apiKey:"AIzaSyClS-D_hARPyBd1suwF7_O7y9aHdCSahzc",authDomain:"image-repo-app.firebaseapp.com",projectId:"image-repo-app",storageBucket:"image-repo-app.appspot.com",messagingSenderId:"542304685495",appId:"1:542304685495:web:d25f8c077f816dabcf6c32",measurementId:"G-FB5TW7SBD7"}),T.a.firestore().settings({timestampsInSnapshots:!0});var z=T.a.storage(),W=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={title:"",image:null},e.handleChange=function(t){"title"===t.target.id&&e.setState({title:t.target.value}),"image"===t.target.id&&e.setState({image:t.target.files[0]})},e.handleSubmit=function(t){t.preventDefault(),console.log("outputting state"),console.log(e.state),e.props.createImage(e.state),e.props.history.push("/")},e}return Object(p.a)(n,[{key:"render",value:function(){return this.props.auth.uid?Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(a.jsx)("h5",{className:"grey-text text-darken-3",children:"Add a new Image"}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"title",children:"Title"}),Object(a.jsx)("input",{type:"text",id:"title",onChange:this.handleChange})]}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("input",{type:"file",id:"image",onChange:this.handleChange})}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("button",{className:"btn orange lighten-1 z-depth-0",children:"ADD"})})]})})}):Object(a.jsx)(l.a,{to:"/signin"})}}]),n}(i.Component),B=Object(o.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createImage:function(t){return e(function(e){return function(){var t=Object(P.a)(k.a.mark((function t(n,a,i){var r,s,c,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.getFirebase,r=i.getFirestore,s=r(),c=a().firebase.profile,l=a().firebase.auth.uid,z.ref("images/".concat(e.image.name)).put(e.image).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){z.ref("images").child(e.image.name).getDownloadURL().then((function(t){console.log(t),s.collection("images").add({title:e.title,authorFirstName:c.firstName,authorLastName:c.lastName,authorID:l,createdAt:new Date,source:t}).then((function(){n({type:"ADD_IMAGE",image:e})})).catch((function(e){n({type:"ADD_IMAGE_ERR",err:e})}))}))}));case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))}}}))(W);var H=function(){return Object(a.jsx)(c.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(b,{}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",component:A}),Object(a.jsx)(l.b,{path:"/signin",component:U}),Object(a.jsx)(l.b,{path:"/signup",component:L}),Object(a.jsx)(l.b,{path:"/create",component:B})]})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,457)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))},J=n(36),K={authError:null},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(J.a)(Object(J.a)({},e),{},{authError:"login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(J.a)(Object(J.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("sign out success"),e;case"SIGNUP_SUCCESS":return console.log("signup successful"),Object(J.a)(Object(J.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(J.a)(Object(J.a)({},e),{},{authError:t.err.message})}return e},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_IMAGE":return console.log("created image",t.image),e;case"ADD_IMAGE_ERR":return console.log("Error while adding image: ",t.err),e;default:return e}},V=n(75),X=Object(E.c)({auth:q,image:Q,firestore:V.firestoreReducer,firebase:I.firebaseReducer}),Y=n(232),Z=Object(E.e)(X,Object(E.d)(Object(E.a)(Y.a.withExtraArgument({getFirebase:I.getFirebase,getFirestore:V.getFirestore})),Object(V.reduxFirestore)(T.a),Object(I.reactReduxFirebase)(T.a,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));Z.firebaseAuthIsReady.then((function(){s.a.render(Object(a.jsx)(o.a,{store:Z,children:Object(a.jsx)(H,{})}),document.getElementById("root"))})),M()}},[[431,1,2]]]);
//# sourceMappingURL=main.f5c6aa63.chunk.js.map